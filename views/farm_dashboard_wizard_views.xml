<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Dashboard Wizard Form View -->
    <record id="view_farm_dashboard_wizard_form" model="ir.ui.view">
        <field name="name">farm.dashboard.wizard.form</field>
        <field name="model">farm.dashboard.wizard</field>
        <field name="arch" type="xml">
            <form string="Sahə Dashboard">
                <sheet>
                    <div class="oe_title">
                        <h1>
                            📊 <field name="field_id" readonly="1" style="font-size: 24px;"/>
                        </h1>
                        <h3 style="color: #875A7B;">
                            Dashboard Məlumatları
                        </h3>
                    </div>
                    <!-- Tarix Filtr Hissəsi -->
                    <group string="📅 Tarix Filtri" col="4">
                        <field name="date_filter" widget="selection" colspan="2"/>
                        <field name="year" invisible="date_filter not in ['year', 'month']"/>
                        <field name="month" invisible="date_filter != 'month'"/>
                        <group name="name" string="Tarix Aralığı" invisible="date_filter != 'custom'">
                            <field name="date_from" invisible="date_filter != 'custom'" 
                                required="date_filter == 'custom'" colspan="2"/>
                            <field name="date_to" invisible="date_filter != 'custom'" 
                                required="date_filter == 'custom'" colspan="2"/>                         
                        </group>
                    </group>
                        <!--<group string="⚡ Əməliyyatlar">
                            <button name="action_refresh" string="🔄 Yenilə" type="object" class="btn-primary"/>
                            <button name="action_print_report" string="🖨️ Hesabat" type="object" class="btn-info"/>
                            <field name="calculation_date" readonly="1" string="📆 Son Yenilənmə"/>
                        </group> -->

                    <notebook>
                        <!-- Əsas Məlumatlar -->
                        <page string="📊 Əsas Məlumatlar">
                            <group>
                                <group string="🏞️ Sahə Məlumatları">
                                    <field name="area_hectare" widget="float"/>
                                    <field name="total_parcels"/>
                                    <field name="total_rows"/>
                                    <field name="total_trees"/>
                                </group>
                                <group string="💰 Ümumi Xərclər">
                                    <field name="total_expenses" widget="monetary" 
                                           style="font-size: 18px; font-weight: bold; color: #d73527;"/>
                                </group>
                            </group>
                        </page>

                        <!-- Gübrə -->
                        <page string="🌿 Gübrə Məlumatları">
                            <group>
                                <group string="🌱 Gübrə">
                                    <field name="total_fertilizer_cost" widget="monetary"/>
                                    <field name="fertilizing_count" string="🌿 Gübrələmə Sayı"/>
                                    <field name="last_fertilizing_date"/>
                                </group>
                            </group>
                        </page>

                        <!-- Su / Sulama -->
                        <page string="💧 Su / Sulama">
                            <group>
                                <group string="💦 Su Xərcləri və İstehlak">
                                    <field name="total_water_cost" widget="monetary" 
                                           style="font-weight: bold; color: #17a2b8;"/>
                                    <field name="total_water_liters" widget="float" 
                                           string="💧 İstifadə Olunan Su (Litr)"
                                           style="font-weight: bold; color: #007bff;"/>
                                    <field name="total_irrigation_count" string="🔢 Sulama Sayı"/>
                                    <field name="last_irrigation_date" string="📅 Son Sulama"/>
                                </group>
                            </group>
                        </page>

                        <!-- İşçi Xərcləri -->
                        <page string="👷 İşçi Xərcləri">
                            <group>
                                <group string="👥 İşçi Məlumatları">
                                    <field name="total_worker_cost" widget="monetary" 
                                           style="font-weight: bold; color: #fd7e14;"/>
                                </group>
                                <group string="📊 Detallı İşçi Xərcləri">
                                    <field name="total_skilled_worker_cost" widget="monetary" 
                                           string="👨‍🔧 Fəhlə Xərci"
                                           style="font-weight: bold; color: #28a745;"/>
                                    <field name="total_general_worker_cost" widget="monetary" 
                                           string="👷‍♂️ Ümumi İşçi Xərci"
                                           style="font-weight: bold; color: #17a2b8;"/>
                                </group>
                            </group>
                        </page>

                        <!-- Digər Xərclər -->
                        <page string="🏭 Digər Xərclər">
                            <group>
                                <group string="🔧 Material və Traktor">
                                    <field name="total_material_cost" widget="monetary"/>
                                    <field name="total_tractor_cost" widget="monetary"/>
                                </group>
                                <group string="⛽ Yanacaq və Digər">
                                    <field name="total_diesel_cost" widget="monetary"/>
                                    <field name="total_hotel_cost" widget="monetary"/>
                                    <field name="total_communal_cost" widget="monetary"/>
                                </group>
                            </group>
                        </page>

                        <!-- Son Əməliyyatlar -->
                        <page string="📋 Son Əməliyyatlar">
                            <group>
                                <group string="�️ Son Tarixlər">
                                    <field name="last_plowing_date"/>
                                    <field name="last_planting_date"/>
                                    <field name="last_irrigation_date"/>
                                    <field name="last_fertilizing_date"/>
                                    <field name="last_treatment_date"/>
                                    <field name="last_pruning_date"/>
                                    <field name="last_harvest_date"/>
                                </group>
                                <group string="📊 Bu Ay Əməliyyat Sayları">
                                    <field name="plowing_count"/>
                                    <field name="planting_count"/>
                                    <field name="irrigation_count"/>
                                    <field name="fertilizing_count"/>
                                    <field name="treatment_count"/>
                                    <field name="pruning_count"/>
                                    <field name="harvest_count"/>
                                </group>
                            </group>
                            <group>
                                <group string="🦠 Xəstəliklər">
                                    <field name="disease_count" string="⚠️ Aktiv Xəstəlik Sayı"/>
                                    <field name="active_diseases" widget="text" 
                                           string="📝 Aktiv Xəstəliklər"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Dashboard Wizard Action -->
    <record id="action_farm_dashboard_wizard" model="ir.actions.act_window">
        <field name="name">Sahə Dashboard</field>
        <field name="res_model">farm.dashboard.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="context">{'default_field_id': active_id}</field>
    </record>

    <!-- Dashboard Menu Action - bütün sahələr üçün -->
    <record id="action_farm_dashboard_menu" model="ir.actions.act_window">
        <field name="name">Dashboard</field>
        <field name="res_model">farm.dashboard.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">current</field>
    </record>
</odoo>
