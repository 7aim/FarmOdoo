<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Dashboard Form View -->
    <record id="view_farm_dashboard_form" model="ir.ui.view">
        <field name="name">farm.dashboard.form</field>
        <field name="model">farm.dashboard</field>
        <field name="arch" type="xml">
            <form string="Sahə Dashboard" create="false" edit="false" delete="false">
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="field_id" readonly="1"/>
                        </h1>
                        <h3>
                            Dashboard - <field name="calculation_date" readonly="1"/>
                        </h3>
                    </div>
                    
                    <!-- Filtr -->
                    <group>
                        <group>
                            <field name="year"/>
                            <field name="month"/>
                        </group>
                        <group>
                            <button name="refresh_dashboard" string="Yenilə" type="object" class="btn-primary"/>
                        </group>
                    </group>

                    <notebook>
                        <!-- Əsas Məlumatlar -->
                        <page string="Əsas Məlumatlar">
                            <group>
                                <group string="Sahə Məlumatları">
                                    <field name="area_hectare" widget="float"/>
                                    <field name="total_parcels"/>
                                    <field name="total_rows"/>
                                    <field name="total_trees"/>
                                </group>
                                <group string="Ümumi Xərclər">
                                    <field name="total_expenses" widget="monetary"/>
                                    <field name="cost_per_tree" widget="monetary"/>
                                </group>
                            </group>
                        </page>

                        <!-- Gübrə Məlumatları -->
                        <page string="Gübrə">
                            <group>
                                <group string="Gübrə Xərcləri">
                                    <field name="total_fertilizer_cost" widget="monetary"/>
                                    <field name="fertilizer_per_tree" widget="monetary"/>
                                    <field name="last_fertilizing_date"/>
                                </group>
                            </group>
                        </page>

                        <!-- Su / Sulama -->
                        <page string="Su / Sulama">
                            <group>
                                <group string="Su Xərcləri">
                                    <field name="total_water_cost" widget="monetary"/>
                                    <field name="water_per_tree" widget="monetary"/>
                                    <field name="total_irrigation_count"/>
                                    <field name="last_irrigation_date"/>
                                </group>
                            </group>
                        </page>

                        <!-- İşçi Xərcləri -->
                        <page string="İşçi Xərcləri">
                            <group>
                                <group string="İşçi Məlumatları">
                                    <field name="total_worker_cost" widget="monetary"/>
                                    <field name="worker_cost_per_tree" widget="monetary"/>
                                </group>
                            </group>
                        </page>

                        <!-- Digər Xərclər -->
                        <page string="Digər Xərclər">
                            <group>
                                <group string="Material">
                                    <field name="total_material_cost" widget="monetary"/>
                                    <field name="material_cost_per_tree" widget="monetary"/>
                                </group>
                                <group string="Traktor">
                                    <field name="total_tractor_cost" widget="monetary"/>
                                    <field name="tractor_cost_per_tree" widget="monetary"/>
                                </group>
                            </group>
                            <group>
                                <group string="Diesel">
                                    <field name="total_diesel_cost" widget="monetary"/>
                                    <field name="diesel_cost_per_tree" widget="monetary"/>
                                </group>
                                <group string="Hotel">
                                    <field name="total_hotel_cost" widget="monetary"/>
                                    <field name="hotel_cost_per_tree" widget="monetary"/>
                                </group>
                            </group>
                            <group>
                                <group string="Kommunal">
                                    <field name="total_communal_cost" widget="monetary"/>
                                    <field name="communal_cost_per_tree" widget="monetary"/>
                                </group>
                            </group>
                        </page>

                        <!-- Son Əməliyyatlar -->
                        <page string="Son Əməliyyatlar">
                            <group>
                                <group string="Sahə Əməliyyatları">
                                    <field name="last_plowing_date"/>
                                    <field name="last_treatment_date"/>
                                    <field name="last_pruning_date"/>
                                    <field name="last_harvest_date"/>
                                </group>
                                <group string="Xəstəliklər">
                                    <field name="disease_count"/>
                                    <field name="active_diseases" widget="text"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Dashboard Tree View -->
    <record id="view_farm_dashboard_tree" model="ir.ui.view">
        <field name="name">farm.dashboard.tree</field>
        <field name="model">farm.dashboard</field>
        <field name="arch" type="xml">
            <tree create="false" edit="false" delete="false">
                <field name="field_id"/>
                <field name="total_trees"/>
                <field name="total_expenses" widget="monetary"/>
                <field name="cost_per_tree" widget="monetary"/>
                <field name="total_fertilizer_cost" widget="monetary"/>
                <field name="total_water_cost" widget="monetary"/>
                <field name="calculation_date"/>
            </tree>
        </field>
    </record>

    <!-- Dashboard Action -->
    <record id="action_farm_dashboard" model="ir.actions.act_window">
        <field name="name">Sahə Dashboard</field>
        <field name="res_model">farm.dashboard</field>
        <field name="view_mode">tree,form</field>
        <field name="target">current</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Sahə dashboard məlumatları
            </p>
            <p>
                Bu səhifədə hər sahə üçün ayrıca dashboard görə bilərsiniz.
            </p>
        </field>
    </record>

    <!-- Menu Item -->
    <menuitem 
        id="menu_farm_dashboard"
        name="Dashboard"
        parent="menu_farm_main"
        action="action_farm_dashboard"
        sequence="5"/>

</odoo>
